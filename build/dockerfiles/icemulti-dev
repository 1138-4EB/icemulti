FROM golang:alpine
RUN echo 'http://dl-cdn.alpinelinux.org/alpine/edge/testing' >> /etc/apk/repositories \
 && sed -i -e 's/v[0-9]\.[0-9]/edge/g' /etc/apk/repositories \
 && apk add -U --no-cache git yarn graphviz curl \
 && go get -u github.com/golang/dep/cmd/dep \
 && curl -L $( \
      curl -s https://api.github.com/repos/gohugoio/hugo/releases/latest \
    | grep "browser_download_url.*Linux-64bit.*tar.gz" \
    | cut -d : -f 2,3 \
    | tr -d \" \
  ) \
  | tar -xvz hugo -C /usr/bin/
